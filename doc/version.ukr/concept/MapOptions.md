# Мапа опцій

Це контейнер, що призначений для передачі даних в рутину та управління її поведінкою.

Мапа опцій може встановлюватись за замовчуванням ( вказуватись безпосередньо в коді рутини ) або ж автоматично генеруватись з інших даних та передаватись в рутину.

Мапи опцій за замовчуванням зберігають налаштування рутини, в свою чергу, це дозволяє створювати нові рутини використовуючи код існуючої. В такому разі, поведінка нової рутини буде відмінною за рахунок використання зміненої мапи опцій.  

Мапи опцій, що генеруються іншими рутинами призначені для обробки комплесних та інших змінних даних, наприклад, вводу користувача.

### Приклад використання мапи опцій

```js
function someFunction()
{
  let mapOptions = someFunction.defaults;
  if( mapOptions.option1 >= 0 )
  {
    console.log( 'option1' );
    // some code
  }

  if( mapOptions.option2 === 1 )
  {
    console.log( 'option2' );
    // some code
  }
  // some code
}

someFunction.defaults =
{
  option1 : 0,
  option2 : 1,
};

someFunction(); // option1 option2
```

Вище вказано спрощений приклад використання мапи опцій. Рутина `someFunction` виводить в консоль рядок з назвою опції та далі виконує код в залежності від того, яка з опцій встановлена. Для використання налаштувань за замовчуванням в рутині відразу ініціалізується мапа опцій `let mapOptions = someFunction.defaults;`, котра встановлює поведінку обробки вхідних даних виконання рутини.

Мапа опцій з налаштуваннями за замовчуванням - це зручний спосіб зберігати налаштування рутини в одному місці.

```js
function someFunction( mapOptions )
{
  if( mapOptions.option1 === 0 )
  {
    console.log( 'option1' );
    // some code
  }

  if( mapOptions.option2 === 1 )
  {
    console.log( 'option2' );
    // some code
  }
  // some code
}

someFunction( { option1 : 0, option2 : 0 } ); // option1
```

В приведеному вище прикладі рутина `someFunction` приймає аргументом мапу опцій. Цей спосіб використання має переваги в порівнянні з першим:

- можливість використання мапи опцій, що згенеровані іншими рутинами;
- можливість перевірки коректності значень мапи опцій при її створенні, до виконання рутини;
- можливість створення нових рутин перевикористанням коду початкової рутини. Для цього потрібно створити нову рутину з викликом першої та передати мапу їй потрібну мапу опцій:


```js
function someFunction( mapOptions )
{
  if( mapOptions.option1 === 0 )
  {
    console.log( 'option1' );
    // some code
  }

  if( mapOptions.option2 === 1 )
  {
    console.log( 'option2' );
    // some code
  }
  // some code
}

function someFunction2( mapOptions )
{
  if( mapOptions.option1 === null || mapOptions.option1 === undefined )
  mapOptions.option1 = someFunction2.defaults.option1;
  mapOptions.option2 = someFunction2.defaults.option2;
  let result = someFunction( mapOptions );
  // some code

}

someFunction2.defaults =
{
  option1 : 1,
  option2 : 1,
};

someFunction2( { option1 : 0, option2 : 0 } ); // option1 option2
```

Приклад демонструє як рутина `someFunction2` використовує код рутини `someFunction`. В приведеному прикладі мапа опцій формується з двох частин - переданого аргумента, та налаштувань за замовчуванням. Якщо опція `option1` не визначена, їй присвоюється значення з мапи опцій рутини `someFunction2`. Значення опції `option2` завжди встановлюється з мапи опцій за замовчуванням.

### Підсумок

- Мапа опцій за замовчуванням дозволяє зберігати налаштування рутини в одному місці.
- Мапа опцій дозволяє перевикористати код рутини змінивши налаштування за замовчуванням.
- Мапа опцій може генеруватись іншими рутинами.
- Створення мапи опцій іншими рутинами забезпечує коректність даних.
- Комбінування мапи опцій за замовчуванням і переданої ззовні дозволяє легко змінювати поведінку рутини.

[Повернутись до змісту](../README.md#Концепції)
