# Евалуатор

xxx : rewrite please

Це одна або дві функції, які дозволяють довільним чином перетворити елементи масиву перед їх порівнянням. Якщо отримані значення співпадають евалуатор повертає <code>true</code>, інакше - <code>false</code>. Евалуатор, в якості колбека, передається в рутини роботи із масивами.

Евалуатор приймає один аргумент.

Якщо евалуатор складається з однієї функції, то вона застосовується як до елементу масиву в першому аргументі, так і до другого аргументу. Отримані значення порівнюються.

Якщо евалуатор складається з двох функцій, то перша застосовується до елементу масиву переданого в першому аргументі, а друга застосовується до елементу переданого другим аргументом. Отримані значення порівнюються.

### Приклад евалуатора з однією рутиною

```js
var dst = [ { val : 3 }, { val : 0 }, { val : 5 } ];
var result = _.arrayRemoveElement( dst, { val : 0 }, ( e ) => e.val );

console.log( result );
// returns [ { val : 3 }, { val : 5 } ]
```

Рутина `arrayRemoveElement` містить в аргументах:
- масив `dst = [ { val : 3 }, { val : 0 }, { val : 5 } ]`;
- елемент порівняння `{ val : 0 }`;
- евалуатор `( e ) => e.val`.

Рутина `arrayRemoveElement` не може видалити елемент `{ val : 0 }` при порівнянні з таким же, тому, вона використовує евалуатор. Евалуатор шукає мапи, котрі містять пару ключ-значення `val : 0`. Якщо співставити значення, то видно, що рутина `arrayRemoveElement` видалить другий елемент  в масиві `dst`.

В цей же час, якщо замінити елемент порівняння з мапи на інший тип, наприклад, на число

```js
_.arrayRemoveElement( dst, 0, ( e ) => e.val );  

// returns [ { val : 3 }, { val : 0 }, { val : 5 } ]
```

то евалуатор не знайде жодного співпадіння, адже, число не має ключів.

### Приклад евалуатора з двома рутинами

```js
var dst = [ { val : 3 }, { val : 0 }, { val : 5 } ];

var evalutor1 = ( arrEl ) => arrEl.val;
var evalutor2 = ( e ) => e.val + 3;

var result = _.arrayRemoveElement( dst, { val : 2 }, evalutor1, evalutor2 );

console.log( result );
// returns [ { val : 3 }, { val : 0 } ]
```

Указана рутина включає масив `dst` з трьома мапами `[ { val : 3 }, { val : 0 }, { val : 5 } ]`, мапу, з якою порівнюватимуться елементи масиву `{ val : 2 }` та дві частини евалуатора.

Для знаходження потрібних елементів в масиві використовується евалуатор з двома функціями. Функція, що виконує операції з елементами масиву шукає значення мапи за ключем `val`

```js
var evalutor1 = ( arrEl ) => arrEl.val;
```

В евалуатор, що виконує операції над елементом порівняння передається функція

```js
var evalutor2 = ( e ) => e.val + 3;
```

Функція використовує початкове значення опції `val : 2` та збільшує його на число `3`, таким чином отримуємо `val : 5`.

Третій елемент масиву має таке значення, тому рутина `arrayRemoveElement` поверне масив без нього - `[ { val : 3 }, { val : 0 } ]`.

[Повернутись до змісту](../README.md#Концепції)
