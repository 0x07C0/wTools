# Налаштування рутин при векторизації

Як використовувати опції рутини <code>vectorize</code> при створенні векторизованої рутини.

[Огляд рутини `vectorize`](Vectorize.md) розкриває призначення і базові можливості, в цьому туторіалі буде показано розширені налаштування при створенні векторизованих рутин.

### Як передавати налаштування для векторизованої рутини

Векторизувати рутину з допомогою `vectorize` можна двома способами:

- через передачу двох аргументів. В рутину передається один або два аргументи, перший з яких - скалярна рутина, а другий - аргумент `select`, котрий впливає на поведінку векторизованої рутини. Наприклад, якщо в `select` передати числове значення, то це визначить кількість аргументів для векторизованої рутини

```js
var someRoutineVector = _.vectorize( someRoutine, 2 );
```

Векторизована рутина `someRoutineVector` створена з рутини `someRoutine`, вона приймає лише два аргументи. Якщо не вказати аргумент `select`, то рутина `vectorize` встановить значення за замовчуванням - `1`.

- через передачу мапи опцій. Для векторизації рутини створюється мапа опцій, котра обов'язково містить поле `routine` - рутина для векторизації, та додатково може поміщати поля: `select`, `fieldFilter`, `bypassingFilteredOut`, `bypassingEmpty`, `vectorizingArray`, `vectorizingMapVals`, `vectorizingMapKeys`. Створена мапа опцій передається в рутину `vectorize`

```js
var option =
{
  routine : someRoutine,
}
var someRoutineVector = _.vectorize( option );
```

Приведений приклад показує як векторизувати рутину `someRoutine` з допомогою мапи опцій. Результуюча рутина `someRoutineVector` матиме налаштування за замовчуваннями.

### Опція `select`

Опція `select` має першочергове значення після опції `routine` при створенні векторизованої рутини. Опція приймає числові значення, що більші або рівні `1`, при цьому встановлюється кількість аргументів, що буде приймати векторизована рутина. Якщо потрібно, щоб векторизована рутина приймала необмежену кількість аргументів в опції вказується значення `Infinity`. За замовчуванням опція має значення `1`.

Також опція `select` може мати рядкове значення, або бути масивом. Використання рядкового значення або масиву впливає на обробку векторизованою рутиною переданих мап.

Тож, згідно опису є чотири напрями обробки вхідних даних в залежності від значення опції `select`:

- коли опція `select` має скінчене числове значення більше від `1`;
- коли опція `select` має значення `Infinity`;
- коли опція `select` має рядкове значення;
- опція `select` має значення в вигляді масиву.

Інші опції рутини працюють в поєднанні з опцією `select`, вони будуть розкриті при розгляді вказаних вище напрямів.

### Векторизація рутини якщо `select` має числове скінчене значення більше або рівне `1`

<!--
При використанні рядкового значення векторизована рутина розглядає значення `select` як ключ для пошуку в мапі. Якщо за таким ключем в переданій мапі знайдено масив, то рутина розкладає мапу на множину мап згідно кількості елементів масиву. -->
