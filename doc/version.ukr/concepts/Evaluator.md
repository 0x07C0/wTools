# Евалуатор

Складний фільтр для відбору елементів масиву - це рутина, яка по черзі виконує операцію над елементом масиву та елементом відбору - якщо значення співпадають, то елемент потрапляє в вибірку.

Евалуатор модуля `Tools` може складатись з однієї або двох рутин. Якщо використовується одна рутина, то евалуатор по черзі виконує операцію над елементом масиву і елементом порівняння. Якщо використовуються дві рутини,то перша з них виконує операцію над елеменом масиву, а друга - над елементом порівняння, отримані значення порівнюються між собою.

Тобто, евалуатор використовується, якщо потрібно перетворити елементи за заданим алгоритмом.

### Приклад евалуатора з однією рутиною

```js
someRoutine( array, element, evaluator1 );
```
Є рутина `someRoutine`, котра здійснює фільтрацію елементів в масиві `array` по елементу `element`. Для цього вона використовує евалуатор `evaluator`.

Рутина може виглядати так:

```js
someRoutine( [ [ 1 ], [ 2 ], [ 3 ] ], [ 1 ], ( e ) => e[ 0 ] )    
```

Рутина включає:
- двомірний масив `[ [ 1 ], [ 2 ], [ 3 ] ]`;
- елемент порівняння `[ 1 ]`;
- евалуатор `( e ) => e[ 0 ]`, котрий обирає кожен елемент масиву з індексом `0`.

Якщо співставити значення, то видно, що рутина `someRoutine` буде виконувати операцію над першим елементом двомірного масиву `[ 1 ]`.

В цей же час, якщо замінити функцію на

```js
someRoutine( [ [ 1 ], [ 2 ], [ 3 ] ], 1, ( e ) => e[ 0 ] )    
```

то евалуатор не знайде жодного співпадіння - елемент порівняння `1` не є масивом, а тому в ньому не ведеться пошук.

### Приклад евалуатора з двома рутинами

```js
someRoutine( array, element, evaluator1, evaluator2 );
```
Є рутина `someRoutine`, котра здійснює фільтрацію елементів в масиві `array` по елементу `element`. Для цього вона використовує евалуатор, який складається з аргументів `evaluator1` i `evaluator2`.

Така рутина може виглядати так:

```js
someRoutine( [ [ 1, 3 ], [ 2, 2 ], [ 3, 1 ] ], 1, ( e ) => e[ 1 ], ( e ) => e + 2 );
```

Указана рутина включає двомірний масив `[ [ 1, 3 ], [ 2, 2 ], [ 3, 1 ] ]`, елемент порівняння `1` та дві частини евалуатора.

Для того, щоб відібрати елементи з двомірного масиву з індексом `1` в аргумент `evaluator1` передається рутина

```js
( e ) => e[ 1 ]
```

В аргумент `evaluator2` має передаватись рутина для перетворення аргумента порівняння. Це рутина

```js
( e ) => e + 2
```

вона використовує початкове значення `e` та збільшує його значення на число `2`, таким чином отримуємо значення `3`.

Перший елемент двомірного масиву має таке включення - `[ 1, 3 ]`.

[Повернутись до змісту](../README.md#Концепції)
